<%- include('include/_adminHeader') -%>

<!-- Modals --->
<div id="addModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeAddModal">&times;</span>
    <h2>Add New Image</h2>
    <div>
      <label for="imageFile">Image File:</label>
      <input type="file" id="imageFile" accept="image/*" required />
      <input type="hidden" id="imageData" name="imageData" />
      <button id="addImageButton" type="submit">Add Image</button>
    </div>
  </div>
</div>

<div id="editModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeEditModal">&times;</span>
    <h2>Edit Image</h2>
    <div>
      <input type="hidden" id="editImageId" name="imageId" />
      <label for="editName">Name:</label>
      <input type="text" id="editName" name="name" required />
      <button id="editImageButton" type="submit">Save Changes</button>
    </div>
  </div>
</div>

<div id="deleteModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeDeleteModal">&times;</span>
    <h2>Delete Image</h2>
    <p>Are you sure you want to delete this image?</p>
    <div>
      <input type="hidden" id="deleteImageId" name="imageId" />
      <button type="submit" id="confirmDeleteButton">Yes, Delete</button>
      <button type="button" id="cancelDelete">Cancel</button>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="container mt-4 text-center">
<h1>Admin - Images</h1>
<button class="btn btn-success mb-3" id="openAddModal">Add New Image</button>

<div class="image-grid">
  <% images.forEach(image => { %>
  <div class="image-item" data-id="<%= image._id %>" data-name="<%= image.name %>">
    <h3><%= image.name %></h3>
    <img src="data:image/png;base64,<%= image.imageData.toString('base64') %>" alt="<%= image.name %>" />
  </div>
<% }); %>
</div>
</div>

<script src="/js/images.js"></script>